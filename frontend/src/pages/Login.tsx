import styled from '@emotion/styled';
import TextField from '@mui/material/TextField';
import { useCallback, useState } from 'react';
import { useNavigate } from 'react-router-dom';
import { useSetRecoilState } from 'recoil';

import { signIn } from '@/api/api';
import { loginNickNameState } from '@/atom/atom';
import { DefaultButton } from '@/components';

const Login = () => {
  const navigate = useNavigate();
  const [nickName, setNickName] = useState('');
  const setAtomNickName = useSetRecoilState(loginNickNameState);

  const onChangeNickName = useCallback(
    (e: React.ChangeEvent<HTMLInputElement>) => {
      const nickNameCurrent = e.target.value;

      setNickName(nickNameCurrent);
    },
    []
  );

  const handleLogin = () => {
    if (!nickName) {
      alert('닉네임을 입력해 주세요');
      setNickName('');
      return;
    }

    signIn(nickName)
      .then((data) => {
        setAtomNickName(nickName);
        return data.data.data;
      })
      .then((data) => {
        if (data.userType === 'USER') {
          navigate('/location-level');
        } else {
          navigate('/farmer-sharing');
        }
      })
      .catch(() => {
        alert('닉네임을 확인해 주세요');
        setNickName('');
      });
  };

  return (
    <Wrapper>
      <MainLogo />
      <InputWrapper>
        <TextField fullWidth label="닉네임" onChange={onChangeNickName} />
        <DefaultButton
          color="#F57D14"
          backgroundColor="#ffffff"
          onClick={handleLogin}
        >
          로그인
        </DefaultButton>
        <ButtonGap>
          <DefaultButton
            backgroundColor="#F57D14"
            onClick={() => navigate('/type-choice')}
          >
            회원가입
          </DefaultButton>
        </ButtonGap>
        <Description>
          귤러가요에서 나눔하는 비상품 귤 기준은
          <br />
          사이즈 48mm 이하, 71mm 이상 귤입니다.
        </Description>
      </InputWrapper>
    </Wrapper>
  );
};

export default Login;

const Wrapper = styled.div`
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
`;

const InputWrapper = styled.div`
  width: 60%;
  padding-top: 2rem;
`;

const Description = styled.div`
  position: fixed;
  width: 100%;
  right: 0;
  top: 80%;
  color: #c5c5c5;
  font-size: 12px;
  text-align: center;
  line-height: 1rem;
  padding-top: 50px;
`;

const ButtonGap = styled.div`
  padding-top: 1.2rem;
`;

const MainLogo = () => {
  return (
    <svg
      width="91"
      height="125"
      viewBox="0 0 116 159"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <mask
        id="mask0_160_5976"
        maskUnits="userSpaceOnUse"
        x="2"
        y="0"
        width="112"
        height="112"
      >
        <rect x="2" width="112" height="112" fill="#D9D9D9" />
      </mask>
      <g mask="url(#mask0_160_5976)">
        <path
          d="M48.9512 111.563C48.7883 108.027 48.8222 105.505 49.0462 101.972C44.8106 103.703 40.127 102.99 35.7624 102.23C31.5776 101.494 27.6644 100.048 24.5047 97.1087C18.5755 91.5868 17.0007 82.973 17.8492 75.2212C18.1885 72.1429 19.4986 67.0588 21.6877 61.4282L24.2875 57.7356C26.8329 53.5475 30.0198 49.6784 34.045 46.875C38.0702 44.0716 42.9948 42.4222 47.8753 42.8328C49.2329 42.9482 50.6346 43.2367 51.775 44.0003C52.9153 44.764 53.7638 46.074 53.6654 47.4418L58.797 50.4013C60.9793 48.9114 64.19 50.0619 65.7037 52.2442C67.2174 54.4265 67.4244 57.2231 67.3328 59.867C67.2411 62.5109 66.9018 65.1989 67.5195 67.7681C68.0523 69.8418 69.1689 71.7187 70.7403 73.1747C72.3117 74.6307 74.2666 75.6047 76.3742 75.9781L79.0283 75.8491C82.9212 72.428 85.2121 71.9698 87.7677 73.2595C91.406 75.0956 91.9524 78.9783 91.1616 82.2399C90.3064 85.8374 88.0256 88.9395 85.1001 91.149C83.6237 92.2452 82.015 93.1582 80.3146 93.8641C79.4797 94.2171 78.6278 94.5293 77.7624 94.8008C76.7883 95.1097 75.8041 95.0995 75.3459 96.0498C73.3299 100.252 72.4712 104.239 72.8649 108.882"
          fill="white"
        />
        <path
          d="M9.58183 43.5322L35.0364 18.0776L104.782 45.5685L108.855 68.9867L105.8 80.6958L95.1091 88.8413H87.4727L75.2546 75.6049L66.0909 68.9867V54.7322L39.6182 43.5322L16.7091 75.6049H14.6727L9.58183 68.9867L7.03638 56.7686L9.58183 43.5322Z"
          fill="white"
        />
        <path
          d="M67.109 19.0957L73.7272 28.7685C77.7999 26.3247 84.2484 29.7867 86.9636 31.8231C106.105 40.7831 109.533 59.9928 108.854 68.4777C108.854 81.9177 100.03 86.2958 95.6181 86.8049H90.5272C92.5636 82.3249 91.3757 78.1504 90.5272 76.6231C87.6763 68.0704 80.1757 73.0595 76.7818 76.6231C64.9709 74.5868 65.4121 61.8595 67.109 55.7504C67.109 49.234 61.3393 49.6413 58.4545 50.6595L54.8909 48.114C52.8545 37.4231 42.1636 43.0231 34.5272 45.5686C28.4181 47.6049 22.1393 58.6352 19.7636 63.8958L15.1818 76.6231C6.01811 66.9504 6.5272 61.8595 9.07266 49.6413C11.6181 37.4231 23.8363 25.2048 39.6181 18.0775C52.2436 12.3757 63.206 16.3806 67.109 19.0957Z"
          fill="#FFAA01"
        />
        <path
          fillRule="evenodd"
          clipRule="evenodd"
          d="M13.7359 77.6344C14.0074 77.7531 14.2857 77.8108 14.564 77.8108C14.9424 77.8108 15.3136 77.7038 15.6336 77.507C15.2548 86.1669 17.9223 93.7536 23.12 98.5951C26.2187 101.477 30.2405 103.32 35.4163 104.232C38.6202 104.792 42.7743 105.515 46.8539 104.728C46.786 106.367 46.8097 107.569 46.9183 109.958C46.9692 111.051 47.8686 111.903 48.9513 111.903C48.9819 111.903 49.0124 111.903 49.0497 111.889C50.1731 111.838 51.042 110.885 50.9911 109.761C50.8282 106.259 50.8655 105.505 51.0827 102.091C51.1268 101.392 50.8078 100.72 50.2376 100.309C49.6674 99.9018 48.9276 99.8136 48.2793 100.078C44.7021 101.541 40.6531 101.008 36.1188 100.217C31.6829 99.4368 28.4349 97.9741 25.8963 95.6119C21.1482 91.193 18.9557 83.8383 19.8754 75.4383C20.1537 72.9234 21.2737 68.1142 23.5884 62.1612C23.9957 61.1125 23.4764 59.9314 22.4277 59.5241C21.3789 59.1168 20.1979 59.6361 19.7906 60.6848C17.8414 65.6956 16.422 70.6916 15.9194 74.2577C15.7662 74.1214 15.5896 74.006 15.3921 73.918C12.6973 72.7165 11.1904 69.6688 10.3996 67.3168C7.76592 59.5481 9.07597 50.0858 13.9022 42.0048C18.0496 35.0608 24.6576 28.9178 33.5429 23.7454C40.772 19.5369 47.156 17.4496 53.058 17.358C60.1955 17.2528 66.8544 20.4702 70.0379 25.5645C70.6352 26.5182 71.891 26.8101 72.8447 26.2128C73.7984 25.6154 74.0903 24.3597 73.493 23.406C69.5119 17.0288 61.6413 13.1529 52.9969 13.2853C46.3754 13.3871 39.3431 15.6542 31.4929 20.2225C22.0069 25.7444 14.9102 32.3694 10.4064 39.9141C4.97949 49.0065 3.53367 59.7381 6.5441 68.6167C8.05101 73.0933 10.5354 76.2089 13.7359 77.6344ZM93.317 89.9237C92.9844 89.9237 92.6552 89.9102 92.3226 89.8864C91.4651 89.8214 90.7708 89.2314 90.532 88.4558C89.4033 90.0665 87.9861 91.5337 86.3288 92.7847C84.7065 93.9896 82.9484 94.9874 81.0953 95.7544C80.2163 96.1244 79.2966 96.4638 78.37 96.7522C78.0883 96.8405 77.8168 96.9084 77.5792 96.9661C77.5445 96.9747 77.5075 96.9838 77.4694 96.993C77.3437 97.0237 77.2073 97.057 77.1108 97.0882C75.1593 101.161 74.5552 102.692 74.8946 106.683C74.9896 107.803 74.1581 108.787 73.0381 108.882C72.977 108.896 72.9193 108.899 72.8616 108.899C71.8163 108.899 70.9237 108.098 70.8355 107.032C70.4044 101.921 71.3988 99.5828 73.5099 95.1842C74.2837 93.5789 75.7465 93.2259 76.6221 93.0155C76.6482 93.009 76.6741 93.0026 76.6998 92.9963L76.7412 92.9861C76.8872 92.9503 77.0251 92.9165 77.1482 92.8764C77.9559 92.6218 78.7535 92.3299 79.5239 92.0041C81.0818 91.3593 82.5445 90.5278 83.8885 89.5299C86.5969 87.4834 88.4839 84.7309 89.1831 81.785C89.5428 80.3018 90.0316 76.6975 86.8515 75.0921C85.4633 74.3896 84.1024 74.1147 80.3724 77.3932C79.6259 78.0498 78.5352 78.0602 77.7786 77.4712C77.4083 77.8219 76.9095 78.0311 76.3778 78.0311C76.259 78.0311 76.1402 78.0209 76.0181 78.0006C73.5201 77.556 71.2156 76.4088 69.3557 74.6847C67.4959 72.9606 66.179 70.7477 65.5477 68.2905C64.981 65.9283 65.1031 63.6306 65.2219 61.4042L65.2329 61.1914L65.2392 61.0714V61.0713V61.0713V61.0712V61.0712V61.0712V61.0711C65.2612 60.6504 65.2832 60.2314 65.2966 59.8124C65.3679 57.7897 65.2864 55.234 64.0307 53.4217C63.155 52.1591 61.1356 51.2869 59.9443 52.1014C59.0144 52.7361 57.7485 52.4951 57.1138 51.5686C56.4791 50.6386 56.7201 49.3727 57.6467 48.738C60.2973 46.9291 64.8384 47.4449 67.3737 51.1036C69.315 53.9002 69.4576 57.3043 69.3659 59.9584C69.3456 60.515 69.3184 61.0716 69.2879 61.6282C69.1793 63.651 69.0774 65.5584 69.4983 67.313C69.9259 68.9829 70.8355 70.5101 72.1218 71.7048C73.4081 72.8995 74.9999 73.6903 76.7274 73.9991C77.0631 74.0588 77.365 74.1979 77.6173 74.3936C77.6312 74.3803 77.6453 74.3671 77.6596 74.3541C77.6678 74.3466 77.6761 74.3392 77.6844 74.3319C83.0401 69.6245 86.1353 70.1675 88.6842 71.4538C92.6347 73.4495 94.3419 77.7699 93.1404 82.7319C92.8855 83.8045 92.5142 84.8554 92.0361 85.87C92.2279 85.8272 92.429 85.8117 92.6348 85.8272C98.469 86.2786 103.499 80.7601 105.457 75.0786C107.677 68.6268 107.415 61.1974 104.724 54.1618C102.301 47.8355 97.9056 41.818 92.0069 36.7679C86.5359 32.074 81.4518 30.0479 76.8903 30.7436C75.7771 30.9133 74.7386 30.1497 74.5689 29.0399C74.3992 27.93 75.1628 26.8881 76.2726 26.7184C82.0627 25.8326 88.2464 28.1744 94.6542 33.676C101.062 39.164 105.861 45.7448 108.525 52.7058C111.559 60.634 111.838 69.0476 109.306 76.4057C108.023 80.1254 105.79 83.5228 103.013 85.9732C100.064 88.5662 96.7313 89.9203 93.317 89.9237ZM23.2219 59.4901C23.5511 59.6904 23.9143 59.7854 24.2741 59.7854C24.963 59.7854 25.635 59.4358 26.0151 58.8079C28.7031 54.3721 31.7916 50.9272 35.1924 48.565C39.1192 45.8397 43.5584 44.5296 47.6922 44.8792C48.9955 44.9878 49.9594 45.2593 50.6348 45.7107C51.2457 46.118 51.6598 46.79 51.6224 47.3093C51.541 48.4327 52.3861 49.4067 53.5061 49.4882C54.6328 49.5696 55.6035 48.7279 55.685 47.6045C55.8275 45.6191 54.7313 43.5454 52.8918 42.3202C51.6122 41.4649 50.068 40.9898 48.035 40.8167C42.9645 40.389 37.5783 41.9502 32.8743 45.2152C28.9984 47.9032 25.523 51.7655 22.5364 56.6935C21.9526 57.654 22.2614 58.9064 23.2219 59.4901ZM31.7406 70.7887C33.0527 70.7887 34.1163 69.4971 34.1163 67.9039C34.1163 66.3106 33.0527 65.019 31.7406 65.019C30.4285 65.019 29.3648 66.3106 29.3648 67.9039C29.3648 69.4971 30.4285 70.7887 31.7406 70.7887ZM45.6559 68.7012C45.6559 70.2944 44.5922 71.586 43.2801 71.586C41.968 71.586 40.9044 70.2944 40.9044 68.7012C40.9044 67.1079 41.968 65.8163 43.2801 65.8163C44.5922 65.8163 45.6559 67.1079 45.6559 68.7012Z"
          fill="black"
        />
        <path
          d="M37.0251 71.4333L28.8796 79.5788L37.0251 81.1061"
          stroke="black"
          strokeWidth="3"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M80.4198 10.9174C79.2623 7.68063 75.1565 6.70705 72.669 9.07944L65.7541 15.6742C65.4479 15.9662 65.0148 16.0835 64.603 15.9859L55.6632 13.866C50.4906 12.6395 47.5161 19.5388 51.959 22.4577L54.6011 24.1935C55.2733 24.6352 55.3595 25.5876 54.7774 26.1428L52.5603 28.2572C49.2614 31.4034 51.8584 36.9388 56.3866 36.4129L70.2233 34.8059C70.5147 34.772 70.8087 34.8418 71.0538 35.0028L82.6958 42.6515C86.5057 45.1546 91.3116 41.3745 89.7766 37.0822L88.7449 34.1974C88.4741 33.44 88.9787 32.6276 89.7777 32.5348L92.9179 32.1701C98.1983 31.5568 98.6383 24.0565 93.4658 22.83L84.526 20.7101C84.1142 20.6125 83.7798 20.3132 83.6374 19.9147L80.4198 10.9174Z"
          fill="#8DC73F"
          stroke="black"
          strokeWidth="3.5"
        />
        <circle
          cx="74.9412"
          cy="20.4087"
          r="4.7949"
          transform="rotate(-26.568 74.9412 20.4087)"
          fill="#50853B"
        />
      </g>
      <path
        d="M21.4803 131.389C22.1861 128.52 22.4767 124.777 20.8575 122.656C17.7022 118.539 9.06647 119.995 5.41291 121.783C3.08792 123.031 4.70711 126.191 7.19817 125.11C9.6062 124.07 16.1245 122.407 17.6191 125.526C18.491 127.439 17.7437 130.391 17.1209 132.138C11.9727 132.886 6.57541 133.011 1.75935 132.512C-0.607161 132.637 -0.524126 136.005 1.6348 136.088C3.42006 136.254 5.20532 136.338 6.99058 136.338C6.90755 137.668 6.74148 138.874 6.49237 140.247C6.28478 141.369 6.90755 142.035 7.69639 142.243C7.15665 143.49 8.1946 145.278 9.73076 144.738C11.0593 144.239 17.5776 142.866 17.7022 145.528C17.7437 146.443 17.2039 147.066 15.9584 147.15C10.5611 147.565 5.66202 149.146 5.86961 153.886C6.16023 160.748 17.8267 159.625 21.8539 156.756C23.7222 155.425 21.6879 152.472 19.8611 153.595C17.0794 155.3 10.0629 156.298 9.93834 153.678C9.81379 151.35 14.0071 151.225 16.9548 150.767C20.3178 150.227 21.6463 148.397 21.6048 145.112C21.5633 143.49 20.9405 142.367 19.9026 141.619C20.1102 141.328 20.2347 140.995 20.2763 140.579C20.3593 138.916 20.3178 136.753 20.2347 135.132C21.3557 134.924 22.4352 134.674 23.5562 134.383C24.7602 134.092 25.2169 133.136 25.0093 132.304C24.8432 131.472 24.0129 130.765 22.8504 131.056L21.4803 131.389ZM10.3535 140.662C10.5611 139.249 10.7272 137.71 10.7687 136.254C12.6785 136.171 14.5883 136.005 16.4981 135.755C16.5397 137.419 16.4981 138.916 16.4151 140.371C14.3392 140.122 12.0557 140.371 10.2705 140.829L10.3535 140.662Z"
        fill="#F57D14"
      />
      <path
        d="M41.5369 145.278C39.7102 146.817 37.4267 147.773 34.9356 147.773C32.1955 147.773 31.9879 145.403 31.9879 142.991C31.9879 139.914 34.3544 140.163 36.6794 140.163C39.7932 140.163 41.8276 139.664 42.6994 137.294C43.2392 135.839 43.4468 134.383 43.4468 133.344C43.4468 128.769 40.2499 126.108 35.932 126.108C33.8146 126.108 31.6557 126.898 29.8289 128.104C27.9606 129.435 29.8705 132.512 31.7803 131.264C33.6486 129.934 36.7209 129.31 38.4646 130.807C39.8762 132.054 39.6686 134.05 39.1289 135.506C38.7553 136.504 37.3852 136.546 35.3508 136.504C32.5691 136.421 29.7459 136.795 28.6664 139.332C27.587 141.868 27.8361 146.526 29.2062 148.855C30.2026 150.684 32.0294 151.516 34.562 151.516C37.8419 151.516 41.6615 150.476 43.8204 148.148C45.3151 146.567 43.1561 143.781 41.5369 145.278ZM48.9271 150.185C48.4704 152.805 52.0825 153.387 52.7467 151.059C55.0302 142.783 54.8226 134.258 52.7467 126.607C51.8749 124.32 48.0967 125.027 48.761 127.48C49.799 131.264 50.3387 135.132 50.3802 138.999C48.4289 139.249 46.436 139.415 44.4017 139.498C42.0767 139.581 42.3258 142.908 44.5262 142.908C46.436 142.908 48.3459 142.783 50.2557 142.534C50.0896 145.112 49.6329 147.649 48.9271 150.185Z"
        fill="#F57D14"
      />
      <path
        d="M65.4327 131.971C67.218 132.262 68.5881 133.26 68.5881 135.589C68.5881 137.46 67.8822 139.373 66.5122 141.411C65.1421 143.407 63.5229 145.361 61.6131 147.316C60.7827 148.189 61.1149 149.229 61.8207 149.853C62.5265 150.476 63.6474 150.726 64.4778 149.936C66.6367 147.94 68.6711 145.486 70.1657 142.991C71.6604 140.496 72.6153 137.876 72.6153 135.381C72.6153 131.597 70.4564 129.518 67.7577 128.644C64.976 127.771 61.6131 128.062 58.9975 129.06C57.6689 129.684 57.3783 130.765 57.7104 131.639C58.0425 132.512 58.9559 133.136 60.0769 132.678C61.5716 132.138 63.7305 131.639 65.4327 131.971ZM82.7456 139.581C84.4478 139.54 86.2331 139.581 88.0183 139.581C90.4264 139.664 90.1358 135.963 87.9768 135.88C86.1916 135.88 84.4063 135.839 82.6626 135.922C82.455 132.72 81.9152 129.601 81.1264 126.607C80.7528 125.401 79.5902 124.985 78.6353 125.193C77.6389 125.401 76.8086 126.274 77.1407 127.48C79.1751 134.965 79.4242 142.7 77.3068 150.185C76.9746 151.474 77.722 152.306 78.6769 152.514C79.6318 152.722 80.7528 152.348 81.1264 151.059C82.1644 147.233 82.7041 143.365 82.7456 139.581Z"
        fill="#F57D14"
      />
      <path
        d="M106.689 131.763C106.357 133.759 104.863 134.841 102.828 134.841C101.168 134.841 99.8805 133.551 99.9635 131.805C100.047 129.643 102.039 128.312 103.825 128.395C105.651 128.478 106.98 130.017 106.689 131.763ZM110.634 131.555C110.841 127.896 108.142 125.027 103.949 124.985C99.6729 124.943 96.3099 127.771 96.1854 131.93C96.0608 135.797 99.0086 138.209 102.704 138.209C106.855 138.209 110.343 136.047 110.634 131.555ZM115.906 146.859C115.699 145.985 114.827 145.32 113.664 145.694C112.543 146.068 111.464 146.401 110.384 146.692C110.343 144.447 110.135 142.159 109.637 140.08C109.305 138.874 108.184 138.417 107.188 138.583C106.191 138.791 105.278 139.623 105.568 140.829C106.067 143.033 106.357 145.32 106.399 147.482C104.863 147.732 103.326 147.857 101.79 147.94C101.749 145.528 101.583 143.074 101.084 140.954C100.752 139.748 99.6729 139.29 98.6765 139.456C97.68 139.664 96.8082 140.496 97.0988 141.66C97.597 143.615 97.8046 145.86 97.8461 147.94C96.1854 147.857 94.5247 147.649 92.8224 147.358C91.66 147.233 90.9541 148.106 90.9126 148.979C90.7881 149.936 91.3278 150.934 92.4903 151.1C95.9778 151.641 99.7974 151.849 103.617 151.558C107.395 151.225 111.173 150.518 114.619 149.229C115.823 148.771 116.197 147.69 115.906 146.859Z"
        fill="#F57D14"
      />
    </svg>
  );
};
